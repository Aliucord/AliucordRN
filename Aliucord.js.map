{"version":3,"file":"Aliucord.js.map","sources":["src/utils/Logger.ts","src/metro/index.ts","src/api/Commands.ts","src/constants.ts","src/utils/Patcher.ts","src/api/PatcherApi.ts","src/entities/Plugin.ts","src/core-plugins/CommandHandler.ts","src/utils/misc.ts","src/core-plugins/CoreCommands.ts","src/core-plugins/NoTrack.ts","src/core-plugins/index.ts","src/utils/findInReactTree.ts","src/ui/patchSettings.tsx","src/utils/debug/DebugWS.ts","src/Aliucord.tsx","src/index.ts"],"sourcesContent":["import { getByProps } from \"../metro\";\n\nconst DiscordLogger = getByProps(\"setLogFn\").default;\n\nexport class Logger extends DiscordLogger {\n    log: (...messages: any[]) => void;\n    info: (...messages: any[]) => void;\n    warn: (...messages: any[]) => void;\n    error: (...messages: any[]) => void;\n    trace: (...messages: any[]) => void;\n    verbose: (...messages: any[]) => void;\n\n    public constructor(public tag: string) {\n        super(`Aliucord:${tag}`);\n\n        const { log, info, warn, error, trace, verbose } = this;\n\n        this.log = (...messages: any[]) => {\n            log(...messages);\n            this._log(console.log, messages);\n        };\n\n        this.info = (...messages: any[]) => {\n            info(...messages);\n            this._log(console.info, messages);\n        };\n\n        this.warn = (...messages: any[]) => {\n            warn(...messages);\n            this._log(console.warn, messages);\n        };\n\n        this.error = (...messages: any[]) => {\n            error(...messages);\n            this._log(console.error, messages);\n        };\n\n        this.trace = (...messages: any[]) => {\n            trace(...messages);\n            this._log(console.trace, messages);\n        };\n\n        this.verbose = (...messages: any[]) => {\n            verbose(...messages);\n            this._log(console.debug, messages);\n        };\n    }\n\n    private _log(log: (m: any) => void, messages: any[]) {\n        log(`[${this.tag}]`);\n        for (const msg of messages) {\n            if (msg instanceof Error) log(msg.stack ?? msg.message);\n            else log(msg);\n        }\n    }\n}\n","import { Logger } from \"../utils/Logger\";\nimport type Constants from \"./constants\";\n\ndeclare const __r: (moduleId: number) => any;\ndeclare const modules: { [id: number]: any; };\n\nconst logger = new Logger(\"Metro\");\n\n/**\n * Module filter options\n */\ntype FilterOptions = {\n    exports?: boolean;\n    default?: false;\n} | {\n    exports?: true;\n    default?: true;\n};\n\n// If you are curious why this exists, run\n// __r(994) and enjoy your Hindi timestamps\nfunction isModuleBlacklisted(id: number) {\n    if (id === 54 || id >= 966 && id <= 994) return true;\n    return false;\n}\n\n/**\n * Find a Discord Module\n * @param filter Module filter\n * @param options Options.\n * @returns Module if found, else null\n */\nexport function getModule(filter: (module: any) => boolean, options?: FilterOptions) {\n    const { exports = true, default: defaultExport = true } = options ?? {};\n\n    for (const key in modules) {\n        const id = Number(key);\n\n        if (isModuleBlacklisted(id)) continue;\n\n\n        let mod;\n        try {\n            mod = __r(id);\n        } catch (err) {\n            console.error(err);\n            // Some modules throw error, ignore\n        }\n        if (!mod) continue;\n\n        try {\n            if (filter(mod)) {\n                const module = modules[id].publicModule;\n                return exports ? module.exports : module;\n            }\n\n            if (mod.default && filter(mod.default)) {\n                const module = modules[id].publicModule;\n                return defaultExport ? module.exports.default :\n                    exports ? module.exports : module;\n            }\n        } catch (e) {\n            logger.error(\"Error during getModule\", e);\n        }\n    }\n\n    return null;\n}\n\ntype PropIntellisense<P extends string> = Record<P, any> & Record<PropertyKey, any>;\n\n/**\n * Find a module by props\n * @param props One or more props\n */\nexport function getByProps<T extends string>(...props: T[]): PropIntellisense<T>;\nexport function getByProps<T extends string>(...options: [...props: T[], options: FilterOptions]): PropIntellisense<T>;\nexport function getByProps<T extends string>(...options: [...props: T[], defaultExport: boolean]): PropIntellisense<T>;\nexport function getByProps(...props: any[]) {\n    if (!props.length) return null;\n\n    const options = typeof props[props.length - 1] === \"object\" ? props.pop() : {};\n    const filter = (module: any) => {\n        for (let i = 0, len = props.length; i < len; i++)\n            if (module[props[i]] === undefined) return false;\n        return true;\n    };\n\n    return getModule(filter, typeof options === \"boolean\" ? { default: options } : options);\n}\n\n/**\n * Find a module by its displayName property. Usually useful for finding React Components\n * @returns Module if found, else null\n */\nexport function getByDisplayName(displayName: string, options?: FilterOptions) {\n    return getModule(m => m.displayName === displayName, options);\n}\n\n/**\n * Find a Store by its name. \n * @returns Module if found, else null\n */\nexport function getByStoreName(storeName: string, options?: FilterOptions) {\n    return getModule(m => m.getName?.() === storeName, options);\n}\n\n/**\n * Get a module by its numeric id. Unless you know what you're doing, you\n * should not use this.\n */\nexport const getById = __r;\n\n/**\n * Same as getModule, but retrieves all matches instead of the first\n * @returns Array of modules\n */\nexport function getAll(filter: (module: any) => boolean, options?: FilterOptions): any[] {\n    const { exports = true, default: defaultExport = true } = options ?? {};\n\n    const ret = [] as any[];\n    for (const key in modules) {\n        const id = Number(key);\n\n        if (isModuleBlacklisted(id)) continue;\n\n        let mod;\n        try {\n            mod = __r(id);\n        } catch {\n            // Some modules throw error, ignore\n        }\n\n        if (!mod) continue;\n\n        try {\n            if (filter(mod)) {\n                const module = modules[Number(id)].publicModule;\n                ret.push(exports ? module.exports : module);\n            }\n\n            if (mod.default && filter(mod.default)) {\n                const module = modules[Number(id)].publicModule;\n                return defaultExport ? module.exports.default :\n                    exports ? module.exports : module;\n            }\n        } catch (e) {\n            logger.error(\"Error during getAll\", e);\n        }\n    }\n\n    return ret;\n}\n\n/**\n * Same as getByProps, but retrieves all matches instead of the first\n * @returns Array of modules\n */\nexport function getAllByProps<T extends string>(...props: T[]): PropIntellisense<T>[];\nexport function getAllByProps<T extends string>(...options: [...props: T[], options: FilterOptions]): PropIntellisense<T>[];\nexport function getAllByProps<T extends string>(...options: [...props: T[], defaultExport: boolean]): PropIntellisense<T>[];\nexport function getAllByProps(...props: any[]) {\n    if (!props.length) return [];\n\n    const options = typeof props[props.length - 1] === \"object\" ? props.pop() : {};\n    const filter = (module: any) => {\n        for (let i = 0, len = props.length; i < len; i++)\n            if (module[props[i]] === undefined) return false;\n        return true;\n    };\n\n    return getAll(filter, typeof options === \"boolean\" ? { default: options } : options);\n}\n\n/**\n * Find all modules with properties containing the specified keyword \n * @param keyword They keyword\n * @param skipConstants Whether constants (names that are FULL_CAPS) should be skipped. Defaults to true\n * @returns Array of names that match. You can then access moduleSearchResults.SomeName to view the\n *          corresponding module \n */\nexport function searchByKeyword(keyword: string, skipConstants = true) {\n    keyword = keyword.toLowerCase();\n    const matches = [];\n    window.moduleSearchResults = {};\n\n    function check(obj: any) {\n        if (!obj) return;\n        for (const name of Object.getOwnPropertyNames(obj)) {\n            if (name.toLowerCase().includes(keyword) && (!skipConstants || name.toUpperCase() !== name)) {\n                matches.push(name);\n                window.moduleSearchResults[name] = obj;\n            }\n        }\n    }\n\n    for (const id in modules) if (!isModuleBlacklisted(Number(id))) {\n        try {\n            __r(Number(id));\n            const mod = modules[id]?.publicModule;\n            if (mod) {\n                check(mod);\n                check(mod.exports);\n                check(mod.exports?.default);\n            }\n        } catch (err) {\n            //\n        }\n    }\n\n    return matches;\n}\n\n// Common modules\nexport let Clipboard: {\n    getString(): Promise<string>;\n    setString(text: string): Promise<string>;\n};\nexport let UserStore: any;\nexport let GuildStore: any;\nexport let ChannelStore: any;\nexport let MessageStore: any;\nexport let GuildMemberStore: any;\nexport let SelectedChannelStore: any;\n\nexport let ModalActions: any;\nexport let MessageActions: any;\nexport let FluxDispatcher: any;\nexport let FetchUserActions: any;\nexport let ContextMenuActions: any;\n\nexport let RestAPI: any;\nexport let i18n: any;\nexport let Flux: any;\nexport let React: typeof import(\"react\");\nexport let ReactNative: typeof import(\"react-native\");\nexport let constants: Constants;\nexport let URLOpener: any;\n\nexport function _initMetro() {\n    UserStore = getByStoreName(\"UserStore\");\n    GuildStore = getByStoreName(\"GuildStore\");\n    ChannelStore = getByStoreName(\"ChannelStore\");\n    MessageStore = getByStoreName(\"MessageStore\");\n    GuildMemberStore = getByStoreName(\"GuildMemberStore\");\n    SelectedChannelStore = getByStoreName(\"SelectedChannelStore\");\n\n    ModalActions = getByProps(\"closeModal\");\n    MessageActions = getByProps(\"sendMessage\", \"receiveMessage\");\n    FluxDispatcher = getByProps(\"dirtyDispatch\");\n    FetchUserActions = getByProps(\"fetchProfile\");\n    ContextMenuActions = getByProps(\"openContextMenu\");\n\n    Clipboard = getByProps(\"getString\", \"setString\");\n    RestAPI = getByProps(\"getAPIBaseURL\", \"get\");\n    i18n = getByProps(\"Messages\");\n    Flux = getByProps(\"connectStores\");\n    React = getByProps(\"createElement\") as any;\n    ReactNative = getByProps(\"Text\", \"Image\") as any;\n    constants = getByProps(\"ActionTypes\") as any;\n    URLOpener = getByProps(\"openURL\", \"handleSupportedURL\");\n}\n","import { getByProps } from \"../metro\";\n\nexport interface CommandSection {\n    id: string;\n    name: string;\n    icon?: string;\n}\n\nexport interface ApplicationCommand {\n    description: string;\n    name: string;\n    options: ApplicationCommandOption[];\n    execute: (args: any[], ctx: CommandContext) => CommandResult | void | Promise<CommandResult> | Promise<void>;\n\n    // added automatically in register\n    id?: string;\n    applicationId?: string;\n    displayName?: string;\n    displayDescription?: string;\n    inputType?: ApplicationCommandInputType;\n    type?: ApplicationCommandType;\n}\n\nexport interface AliucordCommand extends ApplicationCommand {\n    __plugin?: string;\n}\n\nexport enum ApplicationCommandInputType {\n    BUILT_IN,\n    BUILT_IN_TEXT,\n    BUILT_IN_INTEGRATION,\n    BOT,\n    PLACEHOLDER\n}\n\nexport interface ApplicationCommandOption {\n    name: string;\n    description: string;\n    required?: boolean;\n    type: ApplicationCommandOptionType;\n\n    // added automatically in register\n    displayName?: string;\n    displayDescription?: string;\n}\n\nexport enum ApplicationCommandOptionType {\n    SUB_COMMAND = 1,\n    SUB_COMMAND_GROUP,\n    STRING,\n    INTEGER,\n    BOOLEAN,\n    USER6,\n    CHANNEL,\n    ROLE,\n    MENTIONABLE,\n    NUMBER,\n    ATTACHMENT\n}\n\nexport enum ApplicationCommandType {\n    CHAT = 1,\n    USER,\n    MESSAGE\n}\n\nexport interface CommandContext {\n    channel: any;\n    guild: any;\n}\n\nexport interface CommandResult {\n    content: string;\n    tts?: boolean;\n}\n\nconst SnowflakeUtils = getByProps(\"fromTimestamp\");\n\nexport class Commands {\n    private static _idIncrementNum = Date.now();\n\n    static generateId = () => `-${SnowflakeUtils.fromTimestamp(Commands._idIncrementNum++)}`;\n\n    public static _aliucordSection: CommandSection = {\n        id: Commands.generateId(),\n        name: \"Aliucord\"\n    };\n\n    public static _commands: AliucordCommand[] = [];\n\n    public constructor(private plugin: string) { }\n\n    registerCommand(command: AliucordCommand) {\n        command.id = Commands.generateId();\n        command.applicationId = Commands._aliucordSection.id;\n        command.displayName = command.name;\n        command.displayDescription = command.description;\n        command.inputType = ApplicationCommandInputType.BUILT_IN;\n        command.type = ApplicationCommandType.CHAT;\n        command.__plugin = this.plugin;\n\n        for (const option of command.options) {\n            option.displayName = option.name;\n            option.displayDescription = option.description;\n        }\n\n        Commands._commands.push(command);\n    }\n\n    unregisterAll() {\n        Commands._commands = Commands._commands.filter(c => c.__plugin !== this.plugin);\n    }\n}\n","export const ALIUCORD_INVITE = \"https://discord.gg/EsNDvBaHVU\";\n","import { Logger } from \"./Logger\";\n\nconst logger = new Logger(\"Patcher\");\nconst patchInfoSym = Symbol(\"PatchInfo\");\n\nexport type BeforePatchFn<T, R, A extends any[]> = (\n    ctx: PatchContext<T, R, A>,\n    ...args: A\n) => R | void;\n\nexport type AfterPatchFn<T, R, A extends any[]> = (\n    ctx: AfterPatchContext<T, R, A>,\n    ...args: A\n) => R | void;\n\nexport type InsteadFn<T, R, A extends any[]> = (\n    ctx: PatchContext<T, R, A>,\n    ...args: A\n) => R;\n\nexport type Unpatch = () => void;\n\nexport enum PatchPriority {\n    MIN = 0,\n    DEFAULT = 15,\n    MAX = 30\n}\n\ntype PatchFns<T, R, A extends any[]> = {\n    before?: BeforePatchFn<T, R, A>,\n    instead?: InsteadFn<T, R, A>,\n    after?: AfterPatchFn<T, R, A>;\n};\n\nexport class Patch<T, R, A extends any[]> {\n    public before: BeforePatchFn<T, R, A>;\n    public after: AfterPatchFn<T, R, A>;\n\n    public constructor(\n        data: PatchFns<T, R, A>,\n        public readonly priority: number = PatchPriority.DEFAULT,\n        public readonly plugin?: string\n    ) {\n        if (this.priority < PatchPriority.MIN || this.priority > PatchPriority.MAX) {\n            throw new Error(\"Priority must be between PatchPriority.MIN and PatchPriority.MAX\");\n        }\n\n        const defaultFn = () => void 0;\n\n        if (data.instead) {\n            if (data.after || data.before) {\n                throw new Error(\"Instead patches cannot specify before or after patches.\");\n            }\n\n            const { instead } = data;\n            this.before = (ctx: PatchContext<T, R, A>, ...args: A) => {\n                ctx.result = instead(ctx, ...args);\n            };\n            this.after = defaultFn;\n        } else {\n            this.before = data.before ?? defaultFn;\n            this.after = data.after ?? defaultFn;\n        }\n    }\n}\n\nclass PatchInfo<T, R, A extends any[]> {\n    public constructor(public readonly backup: (...args: A) => R, public readonly methodName: string) { }\n\n    private readonly _patches = [] as Patch<T, R, A>[];\n\n    private error(patch: Patch<T, R, A>, type: \"PrePatch\" | \"PostPatch\", error: any) {\n        const message =\n            (patch.plugin ? `[${patch.plugin}] ` : \"\") +\n            (`Error during ${this.methodName} ${type}\\n`);\n        logger.error(message, error);\n    }\n\n    public get patchCount() {\n        return this._patches.length;\n    }\n\n    public addPatch(patch: Patch<T, R, A>) {\n        if (this._patches.includes(patch)) return false;\n        this._patches.push(patch);\n        this._patches.sort((a, b) => b.priority - a.priority);\n        return true;\n    }\n\n    public removePatch(patch: Patch<T, R, A>) {\n        const idx = this._patches.indexOf(patch);\n        if (idx === -1) return false;\n        this._patches.splice(idx, 1);\n        return true;\n    }\n\n    public makeReplacementFunc() {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const _this = this;\n        return function AliucordPatchFn(this: T, ...args: A) {\n            return _this._callback(this, ...args);\n        };\n    }\n\n    private _callback(thisObject: T, ...args: A) {\n        const patches = this._patches;\n        if (!patches.length) return this.backup.call(thisObject, ...args);\n\n        const ctx = new PatchContext(thisObject, args, this.backup);\n\n        let idx = 0;\n        do {\n            try {\n                const result = patches[idx].before(ctx, ...ctx.args);\n                if (result !== undefined) ctx.result = result;\n            } catch (err: any) {\n                this.error(patches[idx], \"PrePatch\", err);\n\n                ctx.result = undefined;\n                ctx._returnEarly = false;\n                continue;\n            }\n\n            if (ctx._returnEarly) {\n                idx++;\n                break;\n            }\n        } while (++idx < patches.length);\n\n        if (!ctx._returnEarly) {\n            try {\n                ctx.result = this.backup.call(ctx.thisObject, ...ctx.args);\n            } catch (err: any) {\n                ctx.error = err;\n            }\n        }\n\n        idx--;\n        do {\n            const lasR = ctx.result;\n            const lastError = ctx.error;\n\n            try {\n                const result = patches[idx].after(ctx as AfterPatchContext<T, R, A>, ...ctx.args);\n                if (result !== undefined) ctx.result = result;\n            } catch (err: any) {\n                this.error(patches[idx], \"PostPatch\", err);\n\n                if (lastError !== null) {\n                    ctx.error = lastError;\n                } else {\n                    ctx.result = lasR;\n                }\n            }\n        } while (--idx >= 0);\n\n        return ctx.getResultOrThrowError();\n    }\n}\n\nclass PatchContext<T, R, A extends any[]> {\n    public constructor(\n        public readonly thisObject: T,\n        public readonly args: A,\n        private readonly backup: (...args: A) => R\n    ) { }\n\n    private _result: R | undefined;\n    private _error: Error | undefined;\n    /** Do not use */\n    _returnEarly = false;\n\n    set result(value: R | undefined) {\n        this._result = value;\n        this._error = undefined;\n        this._returnEarly = true;\n    }\n\n    get result(): R | undefined {\n        return this._result;\n    }\n\n    get error(): Error | undefined {\n        return this._error;\n    }\n\n    set error(error: Error | undefined) {\n        this._returnEarly = error !== undefined;\n        this._error = error;\n    }\n\n    getResultOrThrowError() {\n        if (this._error !== undefined) throw this._error;\n        return this._result;\n    }\n\n    callOriginal(): R {\n        return callOriginal(this.backup, this.thisObject, this.args);\n    }\n}\n\ntype AfterPatchContext<T, R, A extends any[]> = PatchContext<T, R, A> & { result: R; };\n\nfunction resolveMethod(obj: any, methodName: string) {\n    if (obj == null) throw new Error(\"obj may not be null or undefined\");\n    if (typeof methodName !== \"string\" || !methodName) throw new Error(\"methodName must be a non empty string\");\n\n    const method = obj[methodName as any];\n    if (method == null) throw new Error(\"No such method: \" + methodName);\n    if (typeof method !== \"function\") throw new Error(methodName + \" is not a function\");\n    return method;\n}\n\nexport function unpatch<T>(obj: T | any, methodName: string, patch: Patch<T, any, any>) {\n    const func = resolveMethod(obj, methodName);\n    const patchInfo = func[patchInfoSym] as PatchInfo<T, any, any>;\n    if (patchInfo) {\n        patchInfo.removePatch(patch);\n        if (patchInfo.patchCount === 0) {\n            obj[methodName] = patchInfo.backup;\n        }\n    }\n}\n\nexport function callOriginal(func: (...args: any[]) => any, thisObj: any, ...args: any[]) {\n    if (func == null || typeof func !== \"function\") throw new Error(\"Not a function: \" + func);\n    const patchInfo = func[patchInfoSym as keyof typeof func] as PatchInfo<any, any, any>;\n    const original = patchInfo?.backup ?? func;\n    return original.call(thisObj, ...args);\n}\n\nexport function patch<T = any, R = any, A extends any[] = any[]>(\n    object: T | any,\n    name: string,\n    patch: Patch<T, R, A>\n): Unpatch {\n    const original = resolveMethod(object, name);\n\n    let patchInfo = original[patchInfoSym] as PatchInfo<T, R, A>;\n    if (!patchInfo) {\n        patchInfo = new PatchInfo(original, name);\n\n        const replacement = patchInfo.makeReplacementFunc();\n        Object.defineProperty(replacement, patchInfoSym, {\n            value: patchInfo,\n            enumerable: false,\n            writable: true,\n            configurable: true\n        });\n        Object.defineProperties(replacement, Object.getOwnPropertyDescriptors(original));\n\n        object[name] = replacement;\n    }\n\n    patchInfo.addPatch(patch);\n\n    return () => unpatch(object, name, patch);\n}\n\nexport function before<T = any, R = any, A extends any[] = any[]>(\n    object: any,\n    name: string,\n    before: BeforePatchFn<T, R, A>,\n    priority = PatchPriority.DEFAULT,\n    plugin?: string\n): Unpatch {\n    return patch(object, name, new Patch({ before }, priority, plugin));\n}\n\nexport function instead<T = any, R = any, A extends any[] = any[]>(\n    object: any,\n    name: string,\n    instead: InsteadFn<T, R, A>,\n    priority = PatchPriority.DEFAULT,\n    plugin?: string\n): Unpatch {\n    return patch(object, name, new Patch({ instead }, priority, plugin));\n}\n\nexport function insteadDoNothing(object: any, name: string) {\n    return instead(object, name, () => void 0);\n}\n\nexport function after<T = any, R = any, A extends any[] = any[]>(\n    object: any,\n    name: string,\n    after: AfterPatchFn<T, R, A>,\n    priority = PatchPriority.DEFAULT,\n    plugin?: string\n): Unpatch {\n    return patch(object, name, new Patch({ after }, priority, plugin));\n}\n","import {\n    Unpatch,\n    before,\n    PatchPriority,\n    BeforePatchFn,\n    InsteadFn,\n    instead,\n    AfterPatchFn,\n    after,\n    insteadDoNothing\n} from \"../utils/Patcher\";\n\nexport class Patcher {\n    private readonly _unpatches = [] as Unpatch[];\n\n    public constructor(public readonly plugin: string) { }\n\n    public before<T, R, A extends any[]>(object: T, name: string, fn: BeforePatchFn<T, R, A>, priority?: PatchPriority): Unpatch {\n        const unpatch = before<T, R, A>(object, name, fn, priority, this.plugin);\n        this._unpatches.push(unpatch);\n        return unpatch;\n    }\n\n    public instead<T, R, A extends any[]>(object: T, name: string, fn: InsteadFn<T, R, A>, priority?: PatchPriority): Unpatch {\n        const unpatch = instead<T, R, A>(object, name, fn, priority, this.plugin);\n        this._unpatches.push(unpatch);\n        return unpatch;\n    }\n\n    public insteadDoNothing(object: any, name: string): Unpatch {\n        const unpatch = insteadDoNothing(object, name);\n        this._unpatches.push(unpatch);\n        return unpatch;\n    }\n\n    public after<T, R, A extends any[]>(object: T, name: string, fn: AfterPatchFn<T, R, A>, priority?: PatchPriority): Unpatch {\n        const unpatch = after<T, R, A>(object, name, fn, priority, this.plugin);\n        this._unpatches.push(unpatch);\n        return unpatch;\n    }\n\n    public unpatchAll() {\n        let unpatch;\n        while ((unpatch = this._unpatches.pop())) {\n            unpatch();\n        }\n    }\n}\n","import { Commands } from \"../api/Commands\";\nimport { Patcher } from \"../api/PatcherApi\";\nimport { Settings } from \"../api/SettingsAPI\";\nimport { Logger } from \"../utils/Logger\";\n\n/**\n * Plugin class\n * You may pass a Settings Schema to have calls to\n * this.settings.get and this.settings.set validated and typed strongly\n */\nexport default class Plugin<SettingsSchema = any> {\n    public readonly commands = new Commands(this.name);\n    public readonly logger = new Logger(this.name);\n    public readonly patcher = new Patcher(this.name);\n\n    public constructor(public readonly settings: Settings<SettingsSchema>) { }\n\n    public get name() {\n        return this.constructor.name;\n    }\n\n    /**\n     * The start method is called when your plugin is started\n     */\n    public start() {\n        // nop\n    }\n\n    /**\n     * The stop method is called when your plugin is stopped.\n     * By default, this unregisters all commands and patches, so unless\n     * you need to do more cleanup than that, there is no need to overwrite this.\n     */\n    public stop() {\n        this.commands.unregisterAll();\n        this.patcher.unpatchAll();\n    }\n}\n","import { ApplicationCommand, Commands, CommandSection } from \"../api/Commands\";\nimport Plugin from \"../entities/Plugin\";\nimport { getByProps } from \"../metro\";\nimport { after } from \"../utils/Patcher\";\n\nexport default class CommandHandler extends Plugin {\n    start() {\n        const commands = getByProps(\"getBuiltInCommands\");\n        after<any, ApplicationCommand[], any>(commands, \"getBuiltInCommands\", context => [...context.result, ...Commands._commands]);\n\n        const discovery = getByProps(\"useApplicationCommandsDiscoveryState\");\n        after(discovery, \"useApplicationCommandsDiscoveryState\", context => {\n            const res = context.result as any;\n            if (!res.discoverySections.find((s: any) => s.key === Commands._aliucordSection.id) && Commands._commands.length) {\n                res.discoveryCommands.push(...Commands._commands);\n                res.commands.push(...Commands._commands.filter(\n                    command => !res.commands.some((cmd: ApplicationCommand) => cmd.name === command.name))\n                );\n\n                res.discoverySections.push({\n                    data: Commands._commands,\n                    key: Commands._aliucordSection.id,\n                    section: Commands._aliucordSection\n                });\n\n                const offsets = res.sectionsOffset;\n                offsets.push(offsets[offsets.length - 1] + commands.BUILT_IN_COMMANDS.length - 1);\n            }\n\n            if (!res.applicationCommandSections.find((s: CommandSection) => s.id === Commands._aliucordSection.id) && Commands._commands.length) {\n                res.applicationCommandSections.push(Commands._aliucordSection);\n            }\n        });\n    }\n}\n","/**\n * Makes await work in eval.\n * @param code Code to awaitify\n * @returns Modified code (Do not look at it. Trust me, it is an abomination)\n */\nexport function makeAsyncEval(code: string) {\n    return `\n    var __async = (generator) => {\n        return new Promise((resolve, reject) => {\n            var fulfilled = (value) => {\n                try {\n                    step(generator.next(value));\n                } catch (e) {\n                    reject(e);\n                }\n            };\n\n            var rejected = (value) => {\n                try {\n                    step(generator.throw(value));\n                } catch (e) {\n                    reject(e);\n                }\n            };\n\n            var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n\n            step((generator = generator()).next());\n        });\n    };\n\n    __async(function*() {\n        ${code.replace(/\\bawait\\b/g, \"yield\")}\n    });\n    `;\n}\n","import { ApplicationCommandOptionType } from \"../api/Commands\";\nimport Plugin from \"../entities/Plugin\";\nimport { getByProps, i18n } from \"../metro\";\nimport { makeAsyncEval } from \"../utils/misc\";\n\nexport default class CoreCommands extends Plugin {\n    start() {\n        const ClydeUtils = getByProps(\"sendBotMessage\");\n        this.commands.registerCommand({\n            name: \"echo\",\n            description: \"Creates Clyde message\",\n            options: [\n                {\n                    name: \"message\",\n                    description: i18n.Messages.COMMAND_SHRUG_MESSAGE_DESCRIPTION,\n                    required: true,\n                    type: ApplicationCommandOptionType.STRING\n                }\n            ],\n            execute: (args, ctx) => {\n                ClydeUtils.sendBotMessage(ctx.channel.id, args[0].value);\n            }\n        });\n\n        this.commands.registerCommand({\n            name: \"eval\",\n            description: \"Eval javascript\",\n            options: [\n                {\n                    name: \"code\",\n                    description: \"Code to eval. Async functions are not supported. Await is, however you must specify a return explicitly\",\n                    required: true,\n                    type: ApplicationCommandOptionType.STRING\n                }\n            ],\n            execute: async (args, ctx) => {\n                try {\n                    const code = args[0].value as string;\n\n                    let result;\n                    if (code.includes(\"await\")) {\n                        result = await eval(makeAsyncEval(code));\n                    } else {\n                        result = eval(code);\n                    }\n\n                    ClydeUtils.sendBotMessage(ctx.channel.id, this.codeblock(String(result)));\n                } catch (err: any) {\n                    ClydeUtils.sendBotMessage(ctx.channel.id, this.codeblock(err?.stack ?? err?.message ?? String(err)));\n                }\n            }\n        });\n    }\n\n    private codeblock(code: string) {\n        const ZWSP = \"â€‹\";\n        return \"```js\\n\" + code.replace(/`/g, \"`\" + ZWSP) + \"```\";\n    }\n}\n","// Thanks to Powercord and Zere\n// https://github.com/rauenzi/BetterDiscordAddons/blob/master/Plugins/DoNotTrack/DoNotTrack.plugin.js\n// https://github.com/powercord-org/powercord/blob/v2/src/Powercord/coremods/no-track/index.js\n\nimport Plugin from \"../entities/Plugin\";\nimport { getByProps } from \"../metro/index\";\nimport { insteadDoNothing } from \"../utils/Patcher\";\n\nexport default class NoTrack extends Plugin {\n    public start() {\n        const Analytics = getByProps(\"getSuperPropertiesBase64\", \"track\");\n        const Snitch = getByProps(\"submitLiveCrashReport\");\n        const { AnalyticsActionHandlers } = getByProps(\"AnalyticsActionHandlers\");\n\n        insteadDoNothing(Analytics, \"track\");\n        insteadDoNothing(Snitch, \"submitLiveCrashReport\");\n        insteadDoNothing(AnalyticsActionHandlers, \"handleTrack\");\n\n        const sentry = (window as any).__SENTRY__;\n        const hub = sentry.hub;\n\n        sentry.logger.disable();\n\n        insteadDoNothing(hub, \"addBreadcrumb\");\n\n        hub.getClient().close(0);\n        hub.getScope().clear();\n\n        const c = console as any;\n        for (const method in c) if (c[method].__sentry_original__) {\n            c[method] = c[method].__sentry_original__;\n        }\n    }\n}\n","import Plugin from \"../entities/Plugin\";\nimport CommandHandler from \"./CommandHandler\";\nimport CoreCommands from \"./CoreCommands\";\nimport NoTrack from \"./NoTrack\";\n\nconst plugins: Array<typeof Plugin> = [CommandHandler, CoreCommands, NoTrack];\n\nexport function startAll() {\n    for (const pluginClass of plugins) {\n        const { name } = pluginClass;\n        try {\n            window.Aliucord.logger.info(\"Loading CorePlugin \" + name);\n            new pluginClass().start();\n        } catch (e) {\n            window.Aliucord.logger.error(\"Failed to start CorePlugin \" + name, e);\n        }\n    }\n}\n","interface FindInTreeOptions {\n    walkable?: string[];\n    ignore?: string[];\n}\n\nconst { hasOwnProperty } = Object.prototype;\n\n/**\n * Finds a value, subobject, or array from a tree that matches a specific filter. Great for patching render functions.\n * @param {object} tree React tree to look through. Can be a rendered object or an internal instance.\n * @param {callable} searchFilter Filter function to check subobjects against.\n */\nexport function findInReactTree(tree: object, searchFilter: (tree: any) => boolean): any {\n    return findInTree(tree, searchFilter, { walkable: [\"props\", \"children\", \"child\", \"sibling\"] });\n}\n\n/**\n * Finds a value, subobject, or array from a tree that matches a specific filter.\n * @param {object} tree Tree that should be walked\n * @param {callable} searchFilter Filter to check against each object and subobject\n * @param {object} options Additional options to customize the search\n * @param {Array<string>|null} [options.walkable=null] Array of strings to use as keys that are allowed to be walked on. Null value indicates all keys are walkable\n * @param {Array<string>} [options.ignore=[]] Array of strings to use as keys to exclude from the search, most helpful when `walkable = null`.\n */\nexport function findInTree(\n    tree: object,\n    searchFilter: (tree: any) => boolean,\n    { walkable = undefined, ignore = [] }: FindInTreeOptions = {}\n): any {\n    if (typeof searchFilter === \"string\") {\n        if (hasOwnProperty.call(tree, searchFilter)) return tree[searchFilter];\n    } else if (searchFilter(tree)) {\n        return tree;\n    }\n\n    if (typeof tree !== \"object\" || tree == null) return undefined;\n\n    let tempReturn;\n    if (Array.isArray(tree)) {\n        for (const value of tree) {\n            tempReturn = findInTree(value, searchFilter, { walkable, ignore });\n            if (typeof tempReturn != \"undefined\") return tempReturn;\n        }\n    } else {\n        const toWalk = walkable == null ? Object.keys(tree) : walkable;\n        for (const key of toWalk) {\n            if (!hasOwnProperty.call(tree, key) || ignore.includes(key)) continue;\n            tempReturn = findInTree(tree[key as keyof typeof tree], searchFilter, { walkable, ignore });\n            if (typeof tempReturn != \"undefined\") return tempReturn;\n        }\n    }\n    return tempReturn;\n}\n","import type { JSXElementConstructor } from \"react\";\nimport { ALIUCORD_INVITE } from \"../constants\";\nimport { getByProps, getModule, i18n, React, ReactNative } from \"../metro\";\nimport { URLOpener } from \"../metro/index\";\nimport { findInReactTree } from \"../utils/findInReactTree\";\nimport { after } from \"../utils/Patcher\";\n\nconst UserSettingsOverviewWrapper = getModule(m => m.default?.name === \"UserSettingsOverviewWrapper\");\nlet UserSettingsOverview: JSXElementConstructor<any>;\n\nexport default function patchSettings() {\n    const { FormSection, FormRow } = getByProps(\"FormSection\");\n    const nav = getByProps(\"pushLazy\", \"push\");\n\n    const unpatch = after(UserSettingsOverviewWrapper, \"default\", ({ result }) => {\n        if (UserSettingsOverview) {\n            return;\n        }\n\n        unpatch();\n\n        UserSettingsOverview = result.type as JSXElementConstructor<any>;\n\n        after(UserSettingsOverview.prototype, \"render\", ({ result }) => {\n            const { children } = result.props;\n\n            const supportComponent = findInReactTree(children, c => c?.children && Array.isArray(c.children) && c.children.some(x => x?.type?.name === \"UploadLogsButton\"));\n            for (let i = 0; i < supportComponent.children.length; i++) {\n                const child = supportComponent.children[i];\n                if (child.props?.label === i18n.Messages.SUPPORT) {\n                    child.props.onPress = async () => {\n                        URLOpener.openURL(ALIUCORD_INVITE);\n                    };\n                } else if (child.type?.name === \"UploadLogsButton\") {\n                    supportComponent.children.splice(i, 1);\n                    i--;\n                }\n            }\n\n            const nitroIndex = children.findIndex(c => c?.props?.title === i18n.Messages.PREMIUM_SETTINGS);\n            const nitro = children[nitroIndex];\n\n            const aliucordSection = (\n                <FormSection key=\"AliucordSection\" title=\"Aliucord\" titleTextStyle={nitro.props.titleTextStyle} titleWrapperStyle={nitro.props.titleWrapperStyle} >\n                    <FormRow\n                        key={\"ASettings\"}\n                        label={\"Aliucord Settings\"}\n                        arrowShown={true}\n                        onPress={() =>\n                            nav.push(() => <ReactNative.Text>Lol</ReactNative.Text>, {})\n                        }\n                    />\n                    <FormRow\n                        key={\"APlugins\"}\n                        label={\"Plugins\"}\n                        arrowShown={true}\n                        onPress={() =>\n                            nav.push(() => <ReactNative.Text>Lol</ReactNative.Text>, {})\n                        }\n                    />\n                    <FormRow\n                        key={\"AThemes\"}\n                        label={\"Themes\"}\n                        arrowShown={true}\n                        onPress={() =>\n                            nav.push(() => <ReactNative.Text>Lol</ReactNative.Text>, {})\n                        }\n                    />\n                    <FormRow\n                        key={\"AUpdater\"}\n                        label={\"Updater\"}\n                        arrowShown={true}\n                        onPress={() =>\n                            nav.push(() => <ReactNative.Text>Lol</ReactNative.Text>, {})\n                        }\n                    />\n                </FormSection>\n            );\n\n            children.splice(nitroIndex, 0, aliucordSection);\n        });\n    });\n}\n","import { Logger } from \"../Logger\";\nimport { makeAsyncEval } from \"../misc\";\nimport { before } from \"../Patcher\";\n\nconst logger = new Logger(\"DebugWS\");\n\nexport class DebugWS {\n    socket: WebSocket | undefined;\n\n    start() {\n        logger.info(\"Connecting to debug ws\");\n        this.socket = new WebSocket(\"ws://localhost:9090\");\n\n        this.socket.addEventListener(\"open\", () => logger.info(\"Connected with debug websocket\"));\n        this.socket.addEventListener(\"error\", e => logger.error((e as any).message));\n        this.socket.addEventListener(\"message\", async message => {\n            try {\n                const { data } = message;\n                if (data.includes(\"await\")) {\n                    console.log(await eval(makeAsyncEval(data)));\n                } else {\n                    console.log(eval(data));\n                }\n            } catch (e) {\n                logger.error(e as Error | string);\n            }\n        });\n\n        before(globalThis, \"nativeLoggingHook\", (_, message: string, level: number) => {\n            if (this.socket?.readyState === WebSocket.OPEN) {\n                this.socket.send(JSON.stringify({ level, message }));\n            }\n        });\n    }\n}\n","import { Commands } from \"./api/Commands\";\nimport * as AliuConstants from \"./constants\";\nimport * as CorePlugins from \"./core-plugins/index\";\nimport * as Metro from \"./metro\";\nimport { getByProps } from \"./metro/index\";\nimport patchSettings from \"./ui/patchSettings\";\nimport { DebugWS } from \"./utils/debug/DebugWS\";\nimport { Logger } from \"./utils/Logger\";\nimport * as Patcher from \"./utils/Patcher\";\n\nasync function checkPermissions() {\n    const Permissions = getByProps(\"PERMISSIONS\", \"request\");\n\n    const granted = await Permissions.request(Permissions.PERMISSIONS.WRITE_EXTERNAL_STORAGE, {\n        title: \"Storage Access\",\n        message: \"Aliucord needs access to your storage to load plugins and themes.\"\n    });\n\n    return granted === Permissions.RESULTS.GRANTED;\n}\n\nfunction initWithPerms() {\n    // TODO\n}\n\nexport class Aliucord {\n    logger = new Logger(\"Aliucord\");\n    debugWS = new DebugWS();\n\n    Constants = AliuConstants;\n\n    Commands = Commands;\n    /**\n     * Metro. Module Store\n     */\n    Metro = Metro;\n    Patcher = Patcher;\n\n    async load() {\n        try {\n            checkPermissions().then(granted => {\n                if (granted) initWithPerms();\n                else alert(\"Aliucord cannot function without permissions.\");\n            });\n\n            this.logger.info(\"Loading...\");\n\n            Metro._initMetro();\n\n            CorePlugins.startAll();\n\n            this.debugWS.start();\n\n            // Needs to be hardcoded instead of variable so this code is correcty\n            // detected as unreachable and not included in build.\n            // if (variable) still crashes\n            // eslint-disable-next-line no-constant-condition\n            if (false) {\n                // CAUSES CRASHES\n                // \"lateinit property audioManager has not been initialized\"\n                const { ReactDevTools } = await import(\"./utils/debug/ReactDevTools\");\n                new ReactDevTools().connect();\n            }\n\n            patchSettings();\n        } catch (error) {\n            this.logger.error(error as string | Error);\n        }\n    }\n}\n","import { Aliucord } from \"./Aliucord\";\n\nexport const aliucord = window.Aliucord = new Aliucord();\naliucord.load();\n"],"names":["DiscordLogger","getByProps","default","Logger","tag","log","info","warn","error","trace","verbose","messages","_log","console","debug","_a","msg","Error","stack","message","logger","isModuleBlacklisted","id","getModule","filter","options","exports","defaultExport","key","modules","Number","mod","__r","err","module","publicModule","e","props","length","pop","i","len","getByDisplayName","displayName","m","getByStoreName","storeName","getName","call","getById","getAll","ret","push","getAllByProps","searchByKeyword","keyword","skipConstants","_b","toLowerCase","matches","window","moduleSearchResults","check","obj","name","Object","getOwnPropertyNames","includes","toUpperCase","Clipboard","UserStore","GuildStore","ChannelStore","MessageStore","GuildMemberStore","SelectedChannelStore","ModalActions","MessageActions","FluxDispatcher","FetchUserActions","ContextMenuActions","RestAPI","i18n","Flux","React","ReactNative","constants","URLOpener","_initMetro","ApplicationCommandOptionType","ApplicationCommandOptionType2","SnowflakeUtils","_Commands","plugin","command","generateId","applicationId","_aliucordSection","displayDescription","description","inputType","type","__plugin","option","_commands","c","Commands","_idIncrementNum","Date","now","fromTimestamp","ALIUCORD_INVITE","patchInfoSym","Symbol","PatchPriority","PatchPriority2","Patch","data","priority","defaultFn","instead","after","before","instead2","ctx","args","result","PatchInfo","backup","methodName","_patches","patch2","sort","a","b","idx","indexOf","splice","_this","AliucordPatchFn","_callback","thisObject","patches","PatchContext","_returnEarly","lasR","lastError","getResultOrThrowError","_result","value","_error","callOriginal","resolveMethod","method","unpatch","func","patchInfo","removePatch","patchCount","thisObj","original","patch","object","replacement","makeReplacementFunc","defineProperty","enumerable","writable","configurable","defineProperties","getOwnPropertyDescriptors","addPatch","before2","insteadDoNothing","after2","Patcher","_unpatches","fn","Plugin","settings","commands","patcher","constructor","unregisterAll","unpatchAll","CommandHandler","context","discovery","res","discoverySections","find","s","discoveryCommands","some","cmd","section","offsets","sectionsOffset","BUILT_IN_COMMANDS","applicationCommandSections","makeAsyncEval","code","replace","__async","__this","__arguments","generator","Promise","resolve","reject","fulfilled","step","next","rejected","throw","x","done","then","apply","CoreCommands","ClydeUtils","registerCommand","Messages","COMMAND_SHRUG_MESSAGE_DESCRIPTION","required","STRING","execute","args2","ctx2","sendBotMessage","channel","eval","codeblock","String","code2","ZWSP","NoTrack","Analytics","Snitch","AnalyticsActionHandlers","sentry","__SENTRY__","hub","disable","getClient","close","getScope","clear","__sentry_original__","plugins","startAll","pluginClass","Aliucord","start","hasOwnProperty","prototype","findInReactTree","tree","searchFilter","findInTree","walkable","ignore","tempReturn","Array","isArray","toWalk","keys","UserSettingsOverviewWrapper","UserSettingsOverview","patchSettings","FormSection","FormRow","nav","result2","children","supportComponent","_a2","child","label","SUPPORT","onPress","openURL","nitroIndex","findIndex","title","PREMIUM_SETTINGS","nitro","aliucordSection","createElement","titleTextStyle","titleWrapperStyle","arrowShown","Text","DebugWS","socket","WebSocket","addEventListener","globalThis","_","message2","level","readyState","OPEN","send","JSON","stringify","checkPermissions","Permissions","granted","request","PERMISSIONS","WRITE_EXTERNAL_STORAGE","RESULTS","GRANTED","initWithPerms","debugWS","Constants","AliuConstants","Metro","alert","CorePlugins","aliucord","load"],"mappings":"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"}