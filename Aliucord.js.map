{"version":3,"file":"Aliucord.js.map","sources":["src/AliucordNative.ts","src/utils/Logger.ts","src/metro/index.ts","src/api/Commands.ts","src/api/SettingsAPI.ts","src/utils/Patcher.ts","src/api/PatcherApi.ts","src/entities/Plugin.ts","src/core-plugins/CommandHandler.ts","aliucord-version","src/utils/debug/DebugInfo.ts","src/utils/misc.ts","src/core-plugins/CoreCommands.ts","src/core-plugins/NoTrack.ts","src/core-plugins/index.ts","src/utils/constants.ts","src/utils/getAssetId.ts","src/ui/AliucordPage.tsx","src/ui/UpdaterPage.tsx","src/ui/patchSettings.tsx","src/utils/debug/DebugWS.ts","src/Aliucord.tsx","src/index.ts"],"sourcesContent":["import { PluginManifest } from \"./entities/types\";\n// import { Logger } from \"./utils/Logger\";\n\n/**\n * FilePath. Must be absolute\n */\nexport type Path = string;\n\nconst AliucordNative = window.nativeModuleProxy.AliucordNative;\n\n// creating logger here makes Aliucord not load??\n// const logger = new Logger(\"AliucordNative\");\n\n/**\n * Create a directory\n * @param path Path to directory\n * @param recursive Whether to recursively create parent directories if they do not exist\n * @returns true if mkdir succeeded or file exists. false otherwise\n */\nexport async function mkdir(path: Path, recursive = false): Promise<boolean> {\n    try {\n        return AliucordNative.mkdir(path, recursive);\n    } catch (err) {\n        // logger.error(`mkdir failed.\\npath: ${path}, recursive: ${recursive}`, err);\n        return false;\n    }\n}\n\n/**\n * Check whether a file exists\n * @param path File path \n * @returns boolean\n */\nexport const existsFile: (path: Path) => Promise<boolean> = AliucordNative.existsFile;\n\n/**\n * Delete a file\n * @param path File path \n * @returns Whether the file was successfully deleted\n */\nexport const deleteFile: (path: Path) => Promise<boolean> = AliucordNative.deleteFile;\n\n/**\n * Read a file\n * @param path Path to file\n * @param encoding Encoding. Must be one of utf-8 or base64\n * @returns content in the specified encoding\n */\nexport async function readFile(path: Path, encoding: \"base64\" | \"utf-8\" = \"utf-8\"): Promise<string> {\n    return AliucordNative.readFile(path, encoding);\n}\n\n/**\n * Write a file\n * @param path Path to file\n * @param content Content. Must be a string, pass base64 to write binary\n * @param encoding Encoding of content. Must be one of utf-8 or base64\n */\nexport async function writeFile(path: Path, content: string, encoding: \"base64\" | \"utf-8\" = \"utf-8\"): Promise<boolean> {\n    return AliucordNative.writeFile(path, content, encoding);\n}\n\n/**\n * Retrieve a plugin's manifest\n * @param plugin Plugin name\n * @returns PluginManifest or null if no manifest found\n */\nexport async function getManifest(plugin: string): Promise<PluginManifest | null> {\n    try {\n        const data = await AliucordNative.getManifest(plugin);\n        return JSON.parse(data);\n    } catch (err) {\n        // logger.error(\"Error while obtaining manifest of \" + plugin, err);\n        return null;\n    }\n}\n\n/**\n * Get a list of all native modules\n * @returns Map<ModuleName, MethodList>\n */\nexport const listNativeModules: () => Promise<Record<string, string[]>> = AliucordNative.listNativeModules;\n\n/**\n * Used to check if Aliucord has storage permissions\n */\nexport const checkPermissions: () => Promise<boolean> = AliucordNative.checkPermissions;\n\n/**\n * Used to request storage permissions\n */\nexport const requestPermissions: () => Promise<boolean> = AliucordNative.requestPermissions;\n","import { getByProps } from \"../metro\";\n\nconst DiscordLogger = getByProps(\"setLogFn\").default;\n\nexport class Logger extends DiscordLogger {\n    log: (...messages: any[]) => void;\n    info: (...messages: any[]) => void;\n    warn: (...messages: any[]) => void;\n    error: (...messages: any[]) => void;\n    trace: (...messages: any[]) => void;\n    verbose: (...messages: any[]) => void;\n\n    public constructor(public tag: string) {\n        super(`Aliucord:${tag}`);\n\n        const { log, info, warn, error, trace, verbose } = this;\n\n        this.log = (...messages: any[]) => {\n            log(...messages);\n            this._log(console.log, messages);\n        };\n\n        this.info = (...messages: any[]) => {\n            info(...messages);\n            this._log(console.info, messages);\n        };\n\n        this.warn = (...messages: any[]) => {\n            warn(...messages);\n            this._log(console.warn, messages);\n        };\n\n        this.error = (...messages: any[]) => {\n            error(...messages);\n            this._log(console.error, messages);\n        };\n\n        this.trace = (...messages: any[]) => {\n            trace(...messages);\n            this._log(console.trace, messages);\n        };\n\n        this.verbose = (...messages: any[]) => {\n            verbose(...messages);\n            this._log(console.debug, messages);\n        };\n    }\n\n    private _log(log: (m: any) => void, messages: any[]) {\n        log(`[${this.tag}]`);\n        for (const msg of messages) {\n            if (msg instanceof Error) log(msg.stack ?? msg.message);\n            else log(msg);\n        }\n    }\n}\n","import { Logger } from \"../utils/Logger\";\n\ndeclare const __r: (moduleId: number) => any;\ndeclare const modules: { [id: number]: any; };\n\nconst logger = new Logger(\"Metro\");\n\n/**\n * Module filter options\n */\ntype FilterOptions = {\n    exports?: boolean;\n    default?: false;\n} | {\n    exports?: true;\n    default?: true;\n};\n\n// If you are curious why this exists, run\n// __r(994) and enjoy your Hindi timestamps\nfunction isModuleBlacklisted(id: number) {\n    if (id === 54 || id >= 966 && id <= 994) return true;\n    return false;\n}\n\n/**\n * Find a Discord Module\n * @param filter Module filter\n * @param options Options.\n * @returns Module if found, else null\n */\nexport function getModule(filter: (module: any) => boolean, options?: FilterOptions) {\n    const { exports = true, default: defaultExport = true } = options ?? {};\n\n    for (const key in modules) {\n        const id = Number(key);\n\n        if (isModuleBlacklisted(id)) continue;\n\n\n        let mod;\n        try {\n            mod = __r(id);\n        } catch {\n            // Some modules throw error, ignore\n        }\n        if (!mod) continue;\n\n        try {\n            if (filter(mod)) {\n                const module = modules[id].publicModule;\n                return exports ? module.exports : module;\n            }\n\n            if (mod.default && filter(mod.default)) {\n                const module = modules[id].publicModule;\n                return defaultExport ? module.exports.default :\n                    exports ? module.exports : module;\n            }\n        } catch (e) {\n            logger.error(\"Error during getModule\", e);\n        }\n    }\n\n    return null;\n}\n\ntype PropIntellisense<P extends string> = Record<P, any> & Record<PropertyKey, any>;\n\n/**\n * Find a module by props\n * @param props One or more props\n */\nexport function getByProps<T extends string>(...props: T[]): PropIntellisense<T>;\nexport function getByProps<T extends string>(...options: [...props: T[], options: FilterOptions]): PropIntellisense<T>;\nexport function getByProps<T extends string>(...options: [...props: T[], defaultExport: boolean]): PropIntellisense<T>;\nexport function getByProps(...props: any[]) {\n    if (!props.length) return null;\n\n    const options = typeof props[props.length - 1] === \"object\" ? props.pop() : {};\n    const filter = (module: any) => {\n        for (let i = 0, len = props.length; i < len; i++)\n            if (module[props[i]] === undefined) return false;\n        return true;\n    };\n\n    return getModule(filter, typeof options === \"boolean\" ? { default: options } : options);\n}\n\n/**\n * Find a module by its displayName property. Usually useful for finding React Components\n * @returns Module if found, else null\n */\nexport function getByDisplayName(displayName: string, options?: FilterOptions) {\n    return getModule(m => m.displayName === displayName, options);\n}\n\n/**\n * Find a Store by its name. \n * @returns Module if found, else null\n */\nexport function getByStoreName(storeName: string, options?: FilterOptions) {\n    return getModule(m => m.getName?.() === storeName, options);\n}\n\n/**\n * Get a module by its numeric id. Unless you know what you're doing, you\n * should not use this.\n */\nexport const getById = __r;\n\n/**\n * Same as getModule, but retrieves all matches instead of the first\n * @returns Array of modules\n */\nexport function getAll(filter: (module: any) => boolean, options?: FilterOptions): any[] {\n    const { exports = true, default: defaultExport = true } = options ?? {};\n\n    const ret = [] as any[];\n    for (const key in modules) {\n        const id = Number(key);\n\n        if (isModuleBlacklisted(id)) continue;\n\n        let mod;\n        try {\n            mod = __r(id);\n        } catch {\n            // Some modules throw error, ignore\n        }\n\n        if (!mod) continue;\n\n        try {\n            if (filter(mod)) {\n                const module = modules[Number(id)].publicModule;\n                ret.push(exports ? module.exports : module);\n            }\n\n            if (mod.default && filter(mod.default)) {\n                const module = modules[Number(id)].publicModule;\n                return defaultExport ? module.exports.default :\n                    exports ? module.exports : module;\n            }\n        } catch (e) {\n            logger.error(\"Error during getAll\", e);\n        }\n    }\n\n    return ret;\n}\n\n/**\n * Same as getByProps, but retrieves all matches instead of the first\n * @returns Array of modules\n */\nexport function getAllByProps<T extends string>(...props: T[]): PropIntellisense<T>[];\nexport function getAllByProps<T extends string>(...options: [...props: T[], options: FilterOptions]): PropIntellisense<T>[];\nexport function getAllByProps<T extends string>(...options: [...props: T[], defaultExport: boolean]): PropIntellisense<T>[];\nexport function getAllByProps(...props: any[]) {\n    if (!props.length) return [];\n\n    const options = typeof props[props.length - 1] === \"object\" ? props.pop() : {};\n    const filter = (module: any) => {\n        for (let i = 0, len = props.length; i < len; i++)\n            if (module[props[i]] === undefined) return false;\n        return true;\n    };\n\n    return getAll(filter, typeof options === \"boolean\" ? { default: options } : options);\n}\n\n/**\n * Find all modules with properties containing the specified keyword \n * @param keyword They keyword\n * @param skipConstants Whether constants (names that are FULL_CAPS) should be skipped. Defaults to true\n * @returns Array of names that match. You can then access moduleSearchResults.SomeName to view the\n *          corresponding module \n */\nexport function searchByKeyword(keyword: string, skipConstants = true) {\n    keyword = keyword.toLowerCase();\n    const matches = [] as string[];\n    window.moduleSearchResults = {};\n\n    function check(obj: any) {\n        if (!obj) return;\n        for (const name of Object.getOwnPropertyNames(obj)) {\n            if (name.toLowerCase().includes(keyword) && (!skipConstants || name.toUpperCase() !== name)) {\n                matches.push(name);\n                window.moduleSearchResults[name] = obj;\n            }\n        }\n    }\n\n    for (const id in modules) if (!isModuleBlacklisted(Number(id))) {\n        try {\n            __r(Number(id));\n            const mod = modules[id]?.publicModule;\n            if (mod) {\n                check(mod);\n                check(mod.exports);\n                check(mod.exports?.default);\n            }\n        } catch {\n            //\n        }\n    }\n\n    return matches;\n}\n\nexport const UserStore = getByStoreName(\"UserStore\");\nexport const GuildStore = getByStoreName(\"GuildStore\");\nexport const ChannelStore = getByStoreName(\"ChannelStore\");\nexport const MessageStore = getByStoreName(\"MessageStore\");\nexport const GuildMemberStore = getByStoreName(\"GuildMemberStore\");\nexport const SelectedChannelStore = getByStoreName(\"SelectedChannelStore\");\n\nexport const ModalActions = getByProps(\"closeModal\");\nexport const MessageActions = getByProps(\"sendMessage\", \"receiveMessage\");\nexport const FluxDispatcher = getByProps(\"dirtyDispatch\");\nexport const FetchUserActions = getByProps(\"fetchProfile\");\nexport const ContextMenuActions = getByProps(\"openContextMenu\");\n\nexport const Clipboard = getByProps(\"getString\", \"setString\") as {\n    getString(): Promise<string>,\n    setString(str: string): Promise<void>;\n};\n\nexport const RestAPI = getByProps(\"getAPIBaseURL\", \"get\");\nexport const i18n = getByProps(\"Messages\");\nexport const Flux = getByProps(\"connectStores\");\nexport const React = getByProps(\"createElement\") as typeof import(\"react\");\nexport const ReactNative = getByProps(\"Text\", \"Image\") as typeof import(\"react-native\");\nexport const Constants = getByProps(\"ActionTypes\") as import(\"./constants\").default;\nexport const URLOpener = getByProps(\"openURL\", \"handleSupportedURL\");\nexport const Forms = getByProps(\"FormSection\");\n","import { getByProps } from \"../metro\";\n\nexport interface CommandSection {\n    id: string;\n    name: string;\n    icon?: string;\n}\n\nexport interface ApplicationCommand {\n    description: string;\n    name: string;\n    options: ApplicationCommandOption[];\n    execute: (args: any[], ctx: CommandContext) => CommandResult | void | Promise<CommandResult> | Promise<void>;\n\n    // added automatically in register\n    id?: string;\n    applicationId?: string;\n    displayName?: string;\n    displayDescription?: string;\n    inputType?: ApplicationCommandInputType;\n    type?: ApplicationCommandType;\n}\n\nexport interface AliucordCommand extends ApplicationCommand {\n    __plugin?: string;\n}\n\nexport enum ApplicationCommandInputType {\n    BUILT_IN,\n    BUILT_IN_TEXT,\n    BUILT_IN_INTEGRATION,\n    BOT,\n    PLACEHOLDER\n}\n\nexport interface ApplicationCommandOption {\n    name: string;\n    description: string;\n    required?: boolean;\n    type: ApplicationCommandOptionType;\n\n    // added automatically in register\n    displayName?: string;\n    displayDescription?: string;\n}\n\nexport enum ApplicationCommandOptionType {\n    SUB_COMMAND = 1,\n    SUB_COMMAND_GROUP,\n    STRING,\n    INTEGER,\n    BOOLEAN,\n    USER6,\n    CHANNEL,\n    ROLE,\n    MENTIONABLE,\n    NUMBER,\n    ATTACHMENT\n}\n\nexport enum ApplicationCommandType {\n    CHAT = 1,\n    USER,\n    MESSAGE\n}\n\nexport interface CommandContext {\n    channel: any;\n    guild: any;\n}\n\nexport interface CommandResult {\n    content: string;\n    tts?: boolean;\n}\n\nconst SnowflakeUtils = getByProps(\"fromTimestamp\");\n\nexport class Commands {\n    private static _idIncrementNum = Date.now();\n\n    static generateId = () => `-${SnowflakeUtils.fromTimestamp(Commands._idIncrementNum++)}`;\n\n    public static _aliucordSection: CommandSection = {\n        id: Commands.generateId(),\n        name: \"Aliucord\"\n    };\n\n    public static _commands: AliucordCommand[] = [];\n\n    public constructor(private plugin: string) { }\n\n    registerCommand(command: AliucordCommand) {\n        command.id = Commands.generateId();\n        command.applicationId = Commands._aliucordSection.id;\n        command.displayName = command.name;\n        command.displayDescription = command.description;\n        command.inputType = ApplicationCommandInputType.BUILT_IN;\n        command.type = ApplicationCommandType.CHAT;\n        command.__plugin = this.plugin;\n\n        for (const option of command.options) {\n            option.displayName = option.name;\n            option.displayDescription = option.description;\n        }\n\n        Commands._commands.push(command);\n    }\n\n    unregisterAll() {\n        Commands._commands = Commands._commands.filter(c => c.__plugin !== this.plugin);\n    }\n}\n","/**\n * Casts types down to be less specific and also allow missing keys in Objects\n * CastDown<12> -> number\n */\ntype CastDown<T> =\n    T extends number ? number :\n    T extends string ? string :\n    T extends boolean ? boolean :\n    T extends Record<any, any> ? T & Record<string, any> :\n    T;\n\n/**\n * SettingsAPI.\n * For technical reasons, this class must be constructed using Settings.make, \n * and NOT via new.\n */\nexport class Settings<Schema> {\n    private constructor(public readonly module: string, public readonly snapshot: Schema) { }\n\n    // FIXME - find a better way to do this somehow\n    // getSettings is an asynchronous method. Thus, an async factory method\n    // is required to ensure the snapshot is ready before receiving any calls to other methods\n    // An alternative would be making get async, but that would be very inconvenient.\n    /**\n     * Construct a new Settings instance.\n     * Accepts a Schema as generic argument which will be used to validate \n     * and type calls to get and set\n     * @param module Name of your module. Choose something meaningful as this will be used to \n     *               identify your settings\n     * @returns Settings Instance\n     */\n    static async make<Schema = any>(module: string) {\n        const snapshot = (await window.nativeModuleProxy.AliucordNative.getSettings(module)) ?? \"{}\";\n        try {\n            const data = JSON.parse(snapshot);\n            if (typeof data !== \"object\")\n                throw new Error(\"JSON data was not an object.\");\n            return new this<Schema>(module, data);\n        } catch (err: any) {\n            window.Aliucord.logger.error(`[SettingsAPI] Settings of module ${module} are corrupt and were cleared.`);\n            return new this<Schema>(module, {} as Schema);\n        }\n    }\n\n    /**\n     * Get a settings item\n     * @param key Key\n     * @param defaultValue Default value to return in case no such setting exists \n     * @returns Setting if found, otherwise the default value\n     */\n    public get<K extends keyof Schema, T extends Schema[K]>(key: K, defaultValue: T): CastDown<T> {\n        // @ts-ignore\n        return this.snapshot[key] ?? defaultValue;\n    }\n\n    /**\n     * Set a settings item\n     * @param key Key\n     * @param value New value\n     */\n    public async set<K extends keyof Schema>(key: K, value: Schema[K]) {\n        const { snapshot } = this;\n        snapshot[key] = value;\n        return this._persist();\n    }\n\n    /**\n     * Delete a setting\n     * @param key Key\n     */\n    public async delete<K extends keyof Schema>(key: K) {\n        if (key in this.snapshot) {\n            delete this.snapshot[key];\n            return this._persist();\n        }\n    }\n\n    private _persist(): Promise<void> {\n        return window.nativeModuleProxy.AliucordNative.writeSettings(this.module, JSON.stringify(this.snapshot, null, 2));\n    }\n}\n\n","import { Logger } from \"./Logger\";\n\nconst logger = new Logger(\"Patcher\");\n// TODO: Should this be a symbol? String is probably better so you can access\n// it during debugging\nconst patchInfoSym = \"__ALIUCORD_PATCH_INFO__\";\n\nexport type BeforePatchFn<T, R, A extends any[]> = (\n    ctx: PatchContext<T, R, A>,\n    ...args: A\n) => R | void;\n\nexport type AfterPatchFn<T, R, A extends any[]> = (\n    ctx: AfterPatchContext<T, R, A>,\n    result: R,\n    ...args: A\n) => R | void;\n\nexport type InsteadFn<T, R, A extends any[]> = (\n    ctx: PatchContext<T, R, A>,\n    ...args: A\n) => R;\n\nexport type Unpatch = () => void;\n\nexport enum PatchPriority {\n    MIN = 0,\n    DEFAULT = 15,\n    MAX = 30\n}\n\ntype PatchFns<T, R, A extends any[]> = {\n    before?: BeforePatchFn<T, R, A>,\n    instead?: InsteadFn<T, R, A>,\n    after?: AfterPatchFn<T, R, A>;\n};\n\nexport class Patch<T, R, A extends any[]> {\n    public before: BeforePatchFn<T, R, A>;\n    public after: AfterPatchFn<T, R, A>;\n\n    public constructor(\n        data: PatchFns<T, R, A>,\n        public readonly priority: number = PatchPriority.DEFAULT,\n        public readonly plugin?: string\n    ) {\n        if (this.priority < PatchPriority.MIN || this.priority > PatchPriority.MAX) {\n            throw new Error(\"Priority must be between PatchPriority.MIN and PatchPriority.MAX\");\n        }\n\n        const defaultFn = () => void 0;\n\n        if (data.instead) {\n            if (data.after || data.before) {\n                throw new Error(\"Instead patches cannot specify before or after patches.\");\n            }\n\n            const { instead } = data;\n            this.before = (ctx: PatchContext<T, R, A>, ...args: A) => {\n                ctx.result = instead(ctx, ...args);\n            };\n            this.after = defaultFn;\n        } else {\n            this.before = data.before ?? defaultFn;\n            this.after = data.after ?? defaultFn;\n        }\n    }\n}\n\nclass PatchInfo<T, R, A extends any[]> {\n    public constructor(public readonly backup: (...args: A) => R, public readonly methodName: string) { }\n\n    private readonly _patches = [] as Patch<T, R, A>[];\n\n    private error(patch: Patch<T, R, A>, type: \"PrePatch\" | \"PostPatch\", error: any) {\n        const message =\n            (patch.plugin ? `[${patch.plugin}] ` : \"\") +\n            (`Error during ${this.methodName} ${type}\\n`);\n        logger.error(message, error);\n    }\n\n    public get patchCount() {\n        return this._patches.length;\n    }\n\n    public addPatch(patch: Patch<T, R, A>) {\n        if (this._patches.includes(patch)) return false;\n        this._patches.push(patch);\n        this._patches.sort((a, b) => b.priority - a.priority);\n        return true;\n    }\n\n    public removePatch(patch: Patch<T, R, A>) {\n        const idx = this._patches.indexOf(patch);\n        if (idx === -1) return false;\n        this._patches.splice(idx, 1);\n        return true;\n    }\n\n    public makeReplacementFunc() {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const _this = this;\n        return function AliucordPatchFn(this: T, ...args: A) {\n            return _this._callback(this, ...args);\n        };\n    }\n\n    private _callback(thisObject: T, ...args: A) {\n        const patches = this._patches;\n        if (!patches.length) return this.backup.call(thisObject, ...args);\n\n        const ctx = new PatchContext(thisObject, args, this.backup);\n\n        let idx = 0;\n        do {\n            try {\n                const result = patches[idx].before(ctx, ...ctx.args);\n                if (result !== undefined) ctx.result = result;\n            } catch (err: any) {\n                this.error(patches[idx], \"PrePatch\", err);\n\n                ctx.result = undefined;\n                ctx._returnEarly = false;\n                continue;\n            }\n\n            if (ctx._returnEarly) {\n                idx++;\n                break;\n            }\n        } while (++idx < patches.length);\n\n        if (!ctx._returnEarly) {\n            try {\n                ctx.result = this.backup.call(ctx.thisObject, ...ctx.args);\n            } catch (err: any) {\n                ctx.error = err;\n            }\n        }\n\n        idx--;\n        do {\n            const lastRes = ctx.result;\n            const lastError = ctx.error;\n\n            try {\n                const result = patches[idx].after(ctx as AfterPatchContext<T, R, A>, ctx.result!, ...ctx.args);\n                if (result !== undefined) ctx.result = result;\n            } catch (err: any) {\n                this.error(patches[idx], \"PostPatch\", err);\n\n                if (lastError !== null) {\n                    ctx.error = lastError;\n                } else {\n                    ctx.result = lastRes;\n                }\n            }\n        } while (--idx >= 0);\n\n        return ctx.getResultOrThrowError();\n    }\n}\n\nclass PatchContext<T, R, A extends any[]> {\n    public constructor(\n        public readonly thisObject: T,\n        public readonly args: A,\n        private readonly backup: (...args: A) => R\n    ) { }\n\n    private _result: R | undefined;\n    private _error: Error | undefined;\n    /** Do not use */\n    _returnEarly = false;\n\n    set result(value: R | undefined) {\n        this._result = value;\n        this._error = undefined;\n        this._returnEarly = true;\n    }\n\n    get result(): R | undefined {\n        return this._result;\n    }\n\n    get error(): Error | undefined {\n        return this._error;\n    }\n\n    set error(error: Error | undefined) {\n        this._returnEarly = error !== undefined;\n        this._error = error;\n    }\n\n    getResultOrThrowError() {\n        if (this._error !== undefined) throw this._error;\n        return this._result;\n    }\n\n    callOriginal(): R {\n        return callOriginal(this.backup, this.thisObject, this.args);\n    }\n}\n\ntype AfterPatchContext<T, R, A extends any[]> = PatchContext<T, R, A> & { result: R; };\n\nfunction resolveMethod(obj: any, methodName: string) {\n    if (obj == null) throw new Error(\"obj may not be null or undefined\");\n    if (typeof methodName !== \"string\" || !methodName) throw new Error(\"methodName must be a non empty string\");\n\n    const method = obj[methodName as any];\n    if (method == null) throw new Error(\"No such method: \" + methodName);\n    if (typeof method !== \"function\") throw new Error(methodName + \" is not a function\");\n    return method;\n}\n\nexport function unpatch<T>(obj: T | any, methodName: string, patch: Patch<T, any, any>) {\n    const func = resolveMethod(obj, methodName);\n    const patchInfo = func[patchInfoSym] as PatchInfo<T, any, any>;\n    if (patchInfo) {\n        patchInfo.removePatch(patch);\n        if (patchInfo.patchCount === 0) {\n            obj[methodName] = patchInfo.backup;\n        }\n    }\n}\n\nexport function callOriginal(func: (...args: any[]) => any, thisObj: any, ...args: any[]) {\n    if (func == null || typeof func !== \"function\") throw new Error(\"Not a function: \" + func);\n    const patchInfo = func[patchInfoSym as keyof typeof func] as PatchInfo<any, any, any>;\n    const original = patchInfo?.backup ?? func;\n    return original.call(thisObj, ...args);\n}\n\nexport function patch<T = any, R = any, A extends any[] = any[]>(\n    object: T | any,\n    name: string,\n    patch: Patch<T, R, A>\n): Unpatch {\n    const original = resolveMethod(object, name);\n\n    let patchInfo = original[patchInfoSym] as PatchInfo<T, R, A>;\n    if (!patchInfo) {\n        patchInfo = new PatchInfo(original, name);\n\n        const replacement = patchInfo.makeReplacementFunc();\n        Object.defineProperty(replacement, patchInfoSym, {\n            value: patchInfo,\n            enumerable: false,\n            writable: true,\n            configurable: true\n        });\n        Object.defineProperties(replacement, Object.getOwnPropertyDescriptors(original));\n\n        object[name] = replacement;\n    }\n\n    patchInfo.addPatch(patch);\n\n    return () => unpatch(object, name, patch);\n}\n\nexport function before<T = any, R = any, A extends any[] = any[]>(\n    object: any,\n    name: string,\n    before: BeforePatchFn<T, R, A>,\n    priority = PatchPriority.DEFAULT,\n    plugin?: string\n): Unpatch {\n    return patch(object, name, new Patch({ before }, priority, plugin));\n}\n\nexport function instead<T = any, R = any, A extends any[] = any[]>(\n    object: any,\n    name: string,\n    instead: InsteadFn<T, R, A>,\n    priority = PatchPriority.DEFAULT,\n    plugin?: string\n): Unpatch {\n    return patch(object, name, new Patch({ instead }, priority, plugin));\n}\n\nexport function insteadDoNothing(object: any, name: string) {\n    return instead(object, name, () => void 0);\n}\n\nexport function after<T = any, R = any, A extends any[] = any[]>(\n    object: any,\n    name: string,\n    after: AfterPatchFn<T, R, A>,\n    priority = PatchPriority.DEFAULT,\n    plugin?: string\n): Unpatch {\n    return patch(object, name, new Patch({ after }, priority, plugin));\n}\n","import {\n    Unpatch,\n    before,\n    PatchPriority,\n    BeforePatchFn,\n    InsteadFn,\n    instead,\n    AfterPatchFn,\n    after,\n    insteadDoNothing\n} from \"../utils/Patcher\";\n\nexport class Patcher {\n    private readonly _unpatches = [] as Unpatch[];\n\n    public constructor(public readonly plugin: string) { }\n\n    public before<T, R, A extends any[]>(object: T, name: string, fn: BeforePatchFn<T, R, A>, priority?: PatchPriority): Unpatch {\n        const unpatch = before<T, R, A>(object, name, fn, priority, this.plugin);\n        this._unpatches.push(unpatch);\n        return unpatch;\n    }\n\n    public instead<T, R, A extends any[]>(object: T, name: string, fn: InsteadFn<T, R, A>, priority?: PatchPriority): Unpatch {\n        const unpatch = instead<T, R, A>(object, name, fn, priority, this.plugin);\n        this._unpatches.push(unpatch);\n        return unpatch;\n    }\n\n    public insteadDoNothing(object: any, name: string): Unpatch {\n        const unpatch = insteadDoNothing(object, name);\n        this._unpatches.push(unpatch);\n        return unpatch;\n    }\n\n    public after<T, R, A extends any[]>(object: T, name: string, fn: AfterPatchFn<T, R, A>, priority?: PatchPriority): Unpatch {\n        const unpatch = after<T, R, A>(object, name, fn, priority, this.plugin);\n        this._unpatches.push(unpatch);\n        return unpatch;\n    }\n\n    public unpatchAll() {\n        let unpatch;\n        while ((unpatch = this._unpatches.pop())) {\n            unpatch();\n        }\n    }\n}\n","import { Commands } from \"../api/Commands\";\nimport { Patcher } from \"../api/PatcherApi\";\nimport { Settings } from \"../api/SettingsAPI\";\nimport { Logger } from \"../utils/Logger\";\n\n/**\n * Plugin class\n * You may pass a Settings Schema to have calls to\n * this.settings.get and this.settings.set validated and typed strongly\n */\nexport default class Plugin<SettingsSchema = any> {\n    public readonly commands = new Commands(this.name);\n    public readonly logger = new Logger(this.name);\n    public readonly patcher = new Patcher(this.name);\n\n    public constructor(public readonly settings: Settings<SettingsSchema>) { }\n\n    public get name() {\n        return this.constructor.name;\n    }\n\n    /**\n     * The start method is called when your plugin is started\n     */\n    public start() {\n        // nop\n    }\n\n    /**\n     * The stop method is called when your plugin is stopped.\n     * By default, this unregisters all commands and patches, so unless\n     * you need to do more cleanup than that, there is no need to overwrite this.\n     */\n    public stop() {\n        this.commands.unregisterAll();\n        this.patcher.unpatchAll();\n    }\n}\n","import { ApplicationCommand, Commands, CommandSection } from \"../api/Commands\";\nimport Plugin from \"../entities/Plugin\";\nimport { getByProps } from \"../metro\";\nimport { after } from \"../utils/Patcher\";\n\nexport default class CommandHandler extends Plugin {\n    start() {\n        const commands = getByProps(\"getBuiltInCommands\");\n        after<any, ApplicationCommand[], any>(commands, \"getBuiltInCommands\", context => [...context.result, ...Commands._commands]);\n\n        const discovery = getByProps(\"useApplicationCommandsDiscoveryState\");\n        after(discovery, \"useApplicationCommandsDiscoveryState\", context => {\n            const shouldDisplay = context.args[3] === false;\n\n            const res = context.result as any;\n            if (shouldDisplay && !res.discoverySections.find((s: any) => s.key === Commands._aliucordSection.id) && Commands._commands.length) {\n                res.discoveryCommands.push(...Commands._commands);\n                res.commands.push(...Commands._commands.filter(\n                    command => !res.commands.some((cmd: ApplicationCommand) => cmd.name === command.name))\n                );\n\n                res.discoverySections.push({\n                    data: Commands._commands,\n                    key: Commands._aliucordSection.id,\n                    section: Commands._aliucordSection\n                });\n\n                const offsets = res.sectionsOffset;\n                offsets.push(offsets[offsets.length - 1] + commands.BUILT_IN_COMMANDS.length - 1);\n            }\n\n            if (shouldDisplay && !res.applicationCommandSections.find((s: CommandSection) => s.id === Commands._aliucordSection.id) && Commands._commands.length) {\n                res.applicationCommandSections.push(Commands._aliucordSection);\n            }\n        });\n    }\n}\n","export const sha = \"0b50b9d\";","import { ReactNative } from \"../../metro\";\n\nexport class DebugInfo {\n    static getDiscordVersion(): string {\n        try {\n            return `${ReactNative.NativeModules.InfoDictionaryManager.Version} (${ReactNative.NativeModules.InfoDictionaryManager.ReleaseChannel})`;\n        } catch (ex) {\n            return \"unknown\";\n        }\n    }\n\n    static getSystem(): string {\n        try {\n            return `${ReactNative.Platform.OS} ${ReactNative.Platform.constants.Release} (SDK v${ReactNative.Platform.Version}) ${ReactNative.NativeModules.DCDDeviceManager.device} ${ReactNative.Platform.constants.uiMode}`\n        } catch (ex) {\n            return \"unknown\";\n        } \n    }\n\n    static getReactNativeVersion(): string {\n        try {\n            const ver = ReactNative.Platform.constants.reactNativeVersion;\n            return `${ver.major || 0}.${ver.minor || 0}.${ver.patch || 0}`;\n        } catch (ex) {\n            return \"unknown\";\n        }\n    }\n\n    static getHermesVersion(): string {\n        try {\n            if (window.HermesInternal === undefined) return \"N/A\";\n            const runtimeProps = window.HermesInternal.getRuntimeProperties()\n            return `${runtimeProps['OSS Release Version']} ${runtimeProps['Build']} (v${runtimeProps['Bytecode Version']})`\n        } catch (ex) {\n            return \"unknown\";\n        }\n    }\n}\n\nexport default DebugInfo\n","/**\n * Makes await work in eval.\n * @param code Code to awaitify\n * @returns Modified code (Do not look at it. Trust me, it is an abomination)\n */\nexport function makeAsyncEval(code: string) {\n    return `\n    var __async = (generator) => {\n        return new Promise((resolve, reject) => {\n            var fulfilled = (value) => {\n                try {\n                    step(generator.next(value));\n                } catch (e) {\n                    reject(e);\n                }\n            };\n\n            var rejected = (value) => {\n                try {\n                    step(generator.throw(value));\n                } catch (e) {\n                    reject(e);\n                }\n            };\n\n            var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n\n            step((generator = generator()).next());\n        });\n    };\n\n    __async(function*() {\n        ${code.replace(/\\bawait\\b/g, \"yield\")}\n    });\n    `;\n}\n","import { sha } from \"aliucord-version\";\nimport { ApplicationCommandOptionType } from \"../api/Commands\";\nimport Plugin from \"../entities/Plugin\";\nimport { getByProps, i18n, MessageActions } from \"../metro\";\nimport DebugInfo from \"../utils/debug/DebugInfo\";\nimport { makeAsyncEval } from \"../utils/misc\";\n\nexport default class CoreCommands extends Plugin {\n    start() {\n        const ClydeUtils = getByProps(\"sendBotMessage\");\n        this.commands.registerCommand({\n            name: \"echo\",\n            description: \"Creates Clyde message\",\n            options: [\n                {\n                    name: \"message\",\n                    description: i18n.Messages.COMMAND_SHRUG_MESSAGE_DESCRIPTION,\n                    required: true,\n                    type: ApplicationCommandOptionType.STRING\n                }\n            ],\n            execute: (args, ctx) => {\n                ClydeUtils.sendBotMessage(ctx.channel.id, args[0].value);\n            }\n        });\n\n        this.commands.registerCommand({\n            name: \"eval\",\n            description: \"Eval javascript\",\n            options: [\n                {\n                    name: \"code\",\n                    description: \"Code to eval. Async functions are not supported. Await is, however you must specify a return explicitly\",\n                    required: true,\n                    type: ApplicationCommandOptionType.STRING\n                }\n            ],\n            execute: async (args, ctx) => {\n                try {\n                    const code = args[0].value as string;\n\n                    let result;\n                    if (code.includes(\"await\")) {\n                        result = await eval(makeAsyncEval(code));\n                    } else {\n                        result = eval(code);\n                    }\n\n                    ClydeUtils.sendBotMessage(ctx.channel.id, this.codeblock(String(result)));\n                } catch (err: any) {\n                    ClydeUtils.sendBotMessage(ctx.channel.id, this.codeblock(err?.stack ?? err?.message ?? String(err)));\n                }\n            }\n        });\n\n        this.commands.registerCommand({\n            name: \"debug\",\n            description: \"Posts debug info\",\n            options: [],\n            execute: async (args, ctx) => {\n                MessageActions.sendMessage(ctx.channel.id, {\n                    content: `**Debug Info:**\n                        > Discord: ${DebugInfo.getDiscordVersion()}\n                        > Aliucord: ${sha}\n                        > System: ${DebugInfo.getSystem()}\n                        > React: ${DebugInfo.getReactNativeVersion()}\n                        > Hermes: ${DebugInfo.getHermesVersion()}\n                    `.replace(/^\\s+/gm, \"\")\n                });\n            }\n        });\n    }\n\n    private codeblock(code: string) {\n        const ZWSP = \"â€‹\";\n        return \"```js\\n\" + code.replace(/`/g, \"`\" + ZWSP) + \"```\";\n    }\n}\n","// Thanks to Powercord and Zere\n// https://github.com/rauenzi/BetterDiscordAddons/blob/master/Plugins/DoNotTrack/DoNotTrack.plugin.js\n// https://github.com/powercord-org/powercord/blob/v2/src/Powercord/coremods/no-track/index.js\n\nimport Plugin from \"../entities/Plugin\";\nimport { getByProps } from \"../metro/index\";\nimport { insteadDoNothing } from \"../utils/Patcher\";\n\nexport default class NoTrack extends Plugin {\n    public start() {\n        const Analytics = getByProps(\"getSuperPropertiesBase64\", \"track\");\n        const Snitch = getByProps(\"submitLiveCrashReport\");\n        const { AnalyticsActionHandlers } = getByProps(\"AnalyticsActionHandlers\");\n\n        insteadDoNothing(Analytics, \"track\");\n        insteadDoNothing(Snitch, \"submitLiveCrashReport\");\n        insteadDoNothing(AnalyticsActionHandlers, \"handleTrack\");\n\n        const sentry = (window as any).__SENTRY__;\n        const hub = sentry.hub;\n\n        sentry.logger.disable();\n\n        insteadDoNothing(hub, \"addBreadcrumb\");\n\n        hub.getClient().close(0);\n        hub.getScope().clear();\n\n        const c = console as any;\n        for (const method in c) if (c[method].__sentry_original__) {\n            c[method] = c[method].__sentry_original__;\n        }\n    }\n}\n","import Plugin from \"../entities/Plugin\";\nimport CommandHandler from \"./CommandHandler\";\nimport CoreCommands from \"./CoreCommands\";\nimport NoTrack from \"./NoTrack\";\n\nconst plugins: Array<typeof Plugin> = [CommandHandler, CoreCommands, NoTrack];\n\nexport function startAll() {\n    for (const pluginClass of plugins) {\n        const { name } = pluginClass;\n        try {\n            window.Aliucord.logger.info(\"Loading CorePlugin \" + name);\n            new pluginClass().start();\n        } catch (e) {\n            window.Aliucord.logger.error(\"Failed to start CorePlugin \" + name, e);\n        }\n    }\n}\n","export const ALIUCORD_INVITE = \"https://discord.gg/EsNDvBaHVU\";\nexport const ALIUCORD_GITHUB = \"https://github.com/Aliucord/Aliucord\";\nexport const ALIUCORD_PATREON = \"https://patreon.com/Aliucord\";\n","import { getByProps } from \"../metro\";\nimport { after } from \"./Patcher\";\n\nconst assetMap = {};\n\nconst AssetRegistry = getByProps(\"registerAsset\");\n\nafter(AssetRegistry, \"registerAsset\", (_, id, asset) => {\n    console.log(\"PATCHED\");\n    assetMap[asset.name] = id;\n});\n\nfor (let i = 1; ; i++) {\n    const asset = AssetRegistry.getAssetByID(i);\n    if (asset) {\n        assetMap[asset.name] = i;\n    } else break;\n}\n\n/**\n * Get the id of an asset to be used as Image source\n * @example <Image source={getAssetId(\"heart\")} />)\n * @param assetName Name of the asset\n * @returns ID or -1\n * \n * @see findAssets\n */\nexport function getAssetId(assetName: string) {\n    return assetMap[assetName];\n}\n\n/**\n * Lists all assets containing the specified keyword\n * @param keyword\n * @returns asset names\n */\nexport function findAssets(keyword: string) {\n    keyword = keyword.toLowerCase();\n\n    const names = [] as string[];\n    for (const name in assetMap) {\n        if (name.toLowerCase().includes(keyword)) {\n            names.push(name);\n        }\n    }\n\n    return names;\n}\n","import { Settings } from \"../api/SettingsAPI\";\nimport { Forms, React } from \"../metro\";\nimport { URLOpener } from \"../metro/index\";\nimport { ALIUCORD_GITHUB, ALIUCORD_INVITE, ALIUCORD_PATREON } from \"../utils/constants\";\nimport { getAssetId } from \"../utils/getAssetId\";\n\nconst { FormSection, FormSwitch, FormRow } = Forms;\n\n// TODO: make this work\n/*\nbefore(getModule(m => m.prototype?.fromSource).prototype, \"fromSource\", (ctx, source: string) => {\n    if (source.startsWith(\"aliucord_\")) {\n        // Must not be empty\n        ctx.thisObject.serverUrl = \"h\";\n        ctx.thisObject.asset.httpServerLocation = ctx.thisObject.asset.httpServerLocation.slice(10);\n        ctx.result = ctx.thisObject.assetServerURL();\n        console.log(ctx);\n    }\n});\n\nconst id = getByProps(\"registerAsset\").registerAsset({\n    __packager_asset: true,\n    httpServerLocation: \"aliucord_https://raw.githubusercontent.com/Aliucord/Aliucord/main/installer/android/app/src/main/assets\",\n    scales: [1],\n    width: 432,\n    height: 432,\n    name: \"icon1\",\n    type: \"png\"\n});\nconsole.log(\"Registered icon\", id); */\n\n// TODO move this to a more appropriate file trolley\nfunction useSettings<T>(settings: Settings<T>) {\n    const [, update] = React.useState(0);\n\n    return React.useMemo(() => ({\n        get<K extends keyof T, V extends T[K]>(key: K, defaultValue: V) {\n            return settings.get(key, defaultValue);\n        },\n        set<K extends keyof T, V extends T[K]>(key: K, value: V) {\n            settings.set(key, value).then(() => update(x => x + 1));\n        }\n    }), []);\n}\n\nexport default function AliucordPage() {\n    const settings = useSettings(window.Aliucord.settings);\n\n    return (\n        <>\n            <FormSection title=\"Settings\" /* Nice prop name discord */ android_noDivider={true}>\n                <FormRow\n                    label=\"Automatically disable plugins on crash\"\n                    trailing={<FormSwitch value={settings.get(\"disablePluginsOnCrash\", true)} onValueChange={v => settings.set(\"disablePluginsOnCrash\", v)} />}\n                />\n                <FormRow\n                    label=\"Automatically update Aliucord\"\n                    trailing={<FormSwitch value={settings.get(\"autoUpdateAliucord\", false)} onValueChange={v => settings.set(\"autoUpdateAliucord\", v)} />}\n                />\n                <FormRow\n                    label=\"Automatically update Plugins\"\n                    trailing={<FormSwitch value={settings.get(\"autoUpdatePlugins\", false)} onValueChange={v => settings.set(\"autoUpdatePlugins\", v)} />}\n                />\n            </FormSection>\n            <FormSection title=\"Socials\">\n                <FormRow\n                    label=\"Source Code\"\n                    leading={<FormRow.Icon source={getAssetId(\"img_account_sync_github_white\")} />}\n                    trailing={FormRow.Arrow}\n                    onPress={() => URLOpener.openURL(ALIUCORD_GITHUB)}\n                />\n                <FormRow\n                    label=\"Support Server\"\n                    leading={<FormRow.Icon source={getAssetId(\"img_help_icon\")} />}\n                    trailing={FormRow.Arrow}\n                    onPress={() => URLOpener.openURL(ALIUCORD_INVITE)}\n                />\n                <FormRow\n                    label=\"Support Us\"\n                    leading={<FormRow.Icon source={getAssetId(\"ic_premium_perk_heart_24px\")} />}\n                    trailing={FormRow.Arrow}\n                    onPress={() => URLOpener.openURL(ALIUCORD_PATREON)}\n                />\n            </FormSection>\n        </>\n    );\n}\n","\nexport default function UpdaterPage() {\n    return null;\n}\n","import { sha } from \"aliucord-version\";\nimport { Forms, getModule, i18n, React, ReactNative as RN } from \"../metro\";\nimport { after } from \"../utils/Patcher\";\nimport AliucordPage from \"./AliucordPage\";\nimport UpdaterPage from \"./UpdaterPage\";\n\n\nexport default function patchSettings() {\n    const { FormSection, FormRow } = Forms;\n    const UserSettingsOverviewWrapper = getModule(m => m.default?.name === \"UserSettingsOverviewWrapper\");\n\n    after(getModule(m => m.default?.name === \"getScreens\"), \"default\", (_, res) => {\n        res.ASettings = {\n            title: \"Aliucord\",\n            render: AliucordPage\n        };\n        res.APlugins = {\n            title: \"Plugins\",\n            render: () => <RN.Text>Hello World</RN.Text>\n        };\n        res.AThemes = {\n            title: \"Themes\",\n            render: () => <RN.Text>Hello World</RN.Text>\n        };\n        res.AUpdater = {\n            title: \"Updater\",\n            render: UpdaterPage\n        };\n\n        // TODO: add APluginWrapper and make it work?\n        // Or should we add all plugins that register settings to this?\n    });\n\n    const unpatch = after(UserSettingsOverviewWrapper, \"default\", (_, res) => {\n        unpatch();\n\n        const { navigation } = res.props;\n\n        // Yeet the funny Upload Logs button\n        after(res.type.prototype, \"renderSupportAndAcknowledgements\", (_, { props }) => {\n            const idx = props.children.findIndex(c => c?.type?.name === \"UploadLogsButton\");\n            if (idx !== -1) {\n                props.children.splice(idx, 1);\n            }\n        });\n\n        after(res.type.prototype, \"render\", (_, { props }) => {\n            const nitroIndex = props.children.findIndex(c => c?.props?.title === i18n.Messages.PREMIUM_SETTINGS);\n            window.nitro = props.children[nitroIndex];\n\n            const aliucordSection = (\n                <FormSection key=\"AliucordSection\" title={`Aliucord (${sha})`} >\n                    <FormRow\n                        label=\"Aliucord\"\n                        trailing={FormRow.Arrow}\n                        onPress={() =>\n                            navigation.push(\"ASettings\")\n                        }\n                    />\n                    <FormRow\n                        label=\"Plugins\"\n                        trailing={FormRow.Arrow}\n                        onPress={() =>\n                            navigation.push(\"APlugins\")\n                        }\n                    />\n                    <FormRow\n                        label=\"Themes\"\n                        trailing={FormRow.Arrow}\n                        onPress={() =>\n                            navigation.push(\"AThemes\")\n                        }\n                    />\n                    <FormRow\n                        label=\"Updater\"\n                        trailing={FormRow.Arrow}\n                        onPress={() =>\n                            navigation.push(\"AUpdater\")\n                        }\n                    />\n                </FormSection>\n            );\n\n            props.children.splice(nitroIndex, 0, aliucordSection);\n        });\n    });\n}\n","import { Logger } from \"../Logger\";\nimport { makeAsyncEval } from \"../misc\";\nimport { before } from \"../Patcher\";\n\nconst logger = new Logger(\"DebugWS\");\n\nexport class DebugWS {\n    socket: WebSocket | undefined;\n\n    start() {\n        logger.info(\"Connecting to debug ws\");\n        this.socket = new WebSocket(\"ws://localhost:9090\");\n\n        this.socket.addEventListener(\"open\", () => logger.info(\"Connected with debug websocket\"));\n        this.socket.addEventListener(\"error\", e => logger.error((e as any).message));\n        this.socket.addEventListener(\"message\", async message => {\n            try {\n                const { data } = message;\n                if (data.includes(\"await\")) {\n                    console.log(await eval(makeAsyncEval(data)));\n                } else {\n                    console.log(eval(data));\n                }\n            } catch (e) {\n                logger.error(e as Error | string);\n            }\n        });\n\n        before(globalThis, \"nativeLoggingHook\", (_, message: string, level: number) => {\n            if (this.socket?.readyState === WebSocket.OPEN) {\n                this.socket.send(JSON.stringify({ level, message }));\n            }\n        });\n    }\n}\n","import { checkPermissions, requestPermissions } from \"./AliucordNative\";\nimport { Commands } from \"./api/Commands\";\nimport { Settings } from \"./api/SettingsAPI\";\nimport * as CorePlugins from \"./core-plugins/index\";\nimport * as Metro from \"./metro\";\nimport patchSettings from \"./ui/patchSettings\";\nimport * as AliuConstants from \"./utils/constants\";\nimport { DebugWS } from \"./utils/debug/DebugWS\";\nimport { Logger } from \"./utils/Logger\";\nimport * as Patcher from \"./utils/Patcher\";\n\nfunction initWithPerms() {\n    // TODO\n}\n\nexport class Aliucord {\n    settings!: Settings<Record<\"autoUpdateAliucord\" | \"autoUpdatePlugins\" | \"disablePluginsOnCrash\", boolean>>;\n    logger = new Logger(\"Aliucord\");\n    debugWS = new DebugWS();\n\n    Constants = AliuConstants;\n\n    Commands = Commands;\n    /**\n     * Metro. Module Store\n     */\n    Metro = Metro;\n    Patcher = Patcher;\n\n    async load() {\n        this.settings = await Settings.make(\"Aliucord\");\n\n        try {\n            this.logger.info(\"Loading...\");\n\n            checkPermissions().then(granted => {\n                if (granted) initWithPerms();\n                else {\n                    Metro.ReactNative.Alert.alert(\n                        \"Storage Access\",\n                        \"Aliucord needs access to your storage to load plugins and themes.\",\n                        [{\n                            text: \"OK\",\n                            onPress: () => requestPermissions().then(permissionGranted => {\n                                if (permissionGranted) initWithPerms();\n                                else alert(\"Aliucord needs access to your storage to load plugins and themes.\");\n                            })\n                        }]\n                    );\n                }\n            });\n\n            CorePlugins.startAll();\n\n            this.debugWS.start();\n\n            // Needs to be hardcoded instead of variable so this code is correcty\n            // detected as unreachable and not included in build.\n            // if (variable) still crashes\n            // eslint-disable-next-line no-constant-condition\n            if (false) {\n                // CAUSES CRASHES\n                // \"lateinit property audioManager has not been initialized\"\n                const { ReactDevTools } = await import(\"./utils/debug/ReactDevTools\");\n                new ReactDevTools().connect();\n            }\n\n            patchSettings();\n        } catch (error) {\n            this.logger.error(error as string | Error);\n        }\n    }\n}\n","import { Aliucord } from \"./Aliucord\";\n\nexport const aliucord = window.Aliucord = new Aliucord();\naliucord.load();\n"],"names":["AliucordNative","window","nativeModuleProxy","existsFile","deleteFile","listNativeModules","checkPermissions","requestPermissions","DiscordLogger","getByProps","default","Logger","tag","log","info","warn","error","trace","verbose","messages","_log","console","debug","_a","msg","Error","stack","message","logger","isModuleBlacklisted","id","getModule","filter","options","exports","defaultExport","key","modules","Number","mod","__r","e","module","publicModule","props","length","pop","i","len","getByDisplayName","displayName","m","getByStoreName","storeName","getName","call","getById","getAll","ret","push","getAllByProps","searchByKeyword","keyword","skipConstants","_b","toLowerCase","matches","moduleSearchResults","check","obj","name","Object","getOwnPropertyNames","includes","toUpperCase","UserStore","GuildStore","ChannelStore","MessageStore","GuildMemberStore","SelectedChannelStore","ModalActions","MessageActions","FluxDispatcher","FetchUserActions","ContextMenuActions","Clipboard","RestAPI","i18n","Flux","React","ReactNative","Constants","URLOpener","Forms","ApplicationCommandOptionType","ApplicationCommandOptionType2","SnowflakeUtils","_Commands","plugin","command","generateId","applicationId","_aliucordSection","displayDescription","description","inputType","type","__plugin","option","_commands","c","Commands","_idIncrementNum","Date","now","fromTimestamp","__async","__this","__arguments","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","throw","x","done","then","apply","Settings","snapshot","defaultValue","_persist","writeSettings","JSON","stringify","getSettings","data","parse","err","Aliucord","patchInfoSym","PatchPriority","PatchPriority2","Patch","priority","defaultFn","instead","after","before","instead2","ctx","args","result","PatchInfo","backup","methodName","_patches","patch2","sort","a","b","idx","indexOf","splice","_this","AliucordPatchFn","_callback","thisObject","patches","PatchContext","_returnEarly","lastRes","lastError","getResultOrThrowError","_result","_error","callOriginal","resolveMethod","method","unpatch","func","patchInfo","removePatch","patchCount","thisObj","original","patch","object","replacement","makeReplacementFunc","defineProperty","enumerable","writable","configurable","defineProperties","getOwnPropertyDescriptors","addPatch","before2","insteadDoNothing","after2","Patcher","_unpatches","fn","Plugin","settings","commands","patcher","constructor","unregisterAll","unpatchAll","CommandHandler","context","discovery","shouldDisplay","res","discoverySections","find","s","discoveryCommands","some","cmd","section","offsets","sectionsOffset","BUILT_IN_COMMANDS","applicationCommandSections","DebugInfo","NativeModules","InfoDictionaryManager","Version","ReleaseChannel","ex","Platform","OS","constants","Release","DCDDeviceManager","device","uiMode","ver","reactNativeVersion","major","minor","HermesInternal","runtimeProps","getRuntimeProperties","makeAsyncEval","code","replace","CoreCommands","ClydeUtils","registerCommand","Messages","COMMAND_SHRUG_MESSAGE_DESCRIPTION","required","STRING","execute","args2","ctx2","sendBotMessage","channel","eval","codeblock","String","sendMessage","content","getDiscordVersion","sha","getSystem","getReactNativeVersion","getHermesVersion","code2","ZWSP","NoTrack","Analytics","Snitch","AnalyticsActionHandlers","sentry","__SENTRY__","hub","disable","getClient","close","getScope","clear","__sentry_original__","plugins","startAll","pluginClass","start","ALIUCORD_INVITE","ALIUCORD_GITHUB","ALIUCORD_PATREON","assetMap","AssetRegistry","_","asset","getAssetByID","getAssetId","assetName","FormSection","FormSwitch","FormRow","useSettings","update","useState","useMemo","get","set","AliucordPage","createElement","Fragment","title","android_noDivider","label","trailing","onValueChange","v","leading","Icon","source","Arrow","onPress","openURL","UpdaterPage","patchSettings","UserSettingsOverviewWrapper","ASettings","render","APlugins","RN","Text","AThemes","AUpdater","navigation","prototype","_2","children","findIndex","nitroIndex","PREMIUM_SETTINGS","nitro","aliucordSection","DebugWS","socket","WebSocket","addEventListener","globalThis","message2","level","readyState","OPEN","send","initWithPerms","debugWS","AliuConstants","Metro","make","granted","Alert","alert","text","permissionGranted","CorePlugins","aliucord","load"],"mappings":"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"}